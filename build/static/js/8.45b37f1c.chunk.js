(this["webpackJsonpultrasound-client"]=this["webpackJsonpultrasound-client"]||[]).push([[8],{117:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return j})),n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return h})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return m}));var c=n(2),a=n.n(c),i=n(3),s=n(4),r=n(8),o=n(32),u=n(26),l=n(20),b=n(14),d=Object(s.b)("edit/dataName",function(){var e=Object(i.a)(a.a.mark((function e(t,n){var c,i,s,o,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.type,i=t.id,s=t.textValue,o={name:s},e.next=4,r.a.post("/edit/".concat(c,"/name/").concat(i),o);case 4:u=e.sent,n.dispatch(Object(b.d)(u.data.message));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),j=Object(s.b)("edit/itemName",function(){var e=Object(i.a)(a.a.mark((function e(t,n){var c,i,s,o,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.type,i=t.id,s=t.item,o=t.textValue,u={newName:o,link:s.link,name:s.name},e.next=4,r.a.post("/edit/".concat(c,"/item/name/").concat(i),u);case 4:l=e.sent,n.dispatch(Object(b.d)(l.data.message));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),O=Object(s.b)("items/delete",function(){var e=Object(i.a)(a.a.mark((function e(t,n){var c,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.id,i=t.type,e.next=3,r.a.delete("/delete-data/".concat(i,"/").concat(c));case 3:s=e.sent,n.dispatch(Object(o.d)()),n.dispatch(Object(o.f)()),n.dispatch(Object(b.d)(s.data.message));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),h=Object(s.b)("items/delete",function(){var e=Object(i.a)(a.a.mark((function e(t,n){var c,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.id,i=t.type,s=t.item,r.a.post("/delete-item/".concat(i,"/").concat(c),s).then((function(e){n.dispatch(Object(l.e)(s.name)),n.dispatch(Object(b.d)(e.data.message)),"subMenu"===i&&(n.dispatch(Object(l.e)(s.link)),n.dispatch(Object(u.e)(s.link))),n.dispatch(Object(o.c)(!0))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),f=Object(s.b)("edit/import",function(){var e=Object(i.a)(a.a.mark((function e(t,n){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.delete("/tables/clear").then((function(){n.dispatch(Object(b.d)("Initializing the database")),r.a.post("/S3/update").then((function(e){n.dispatch(Object(o.d)()),n.dispatch(Object(b.d)(e.data.message))}))}));case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),m=Object(s.b)("edit/update",function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.a.post("/S3/update/newData").then((function(e){n.dispatch(Object(o.d)()),n.dispatch(Object(b.d)(e.data.message))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),p=Object(s.c)({name:"edit",initialState:{loading:"idle"},reducers:{},extraReducers:function(e){e.addCase(d.pending,(function(e){e.loading="pending"})),e.addCase(d.fulfilled,(function(e){e.loading="successful"})),e.addCase(h.pending,(function(e){e.loading="pending"})),e.addCase(h.fulfilled,(function(e){e.loading="successful"}))}});p.reducer,p.reducer},125:function(e,t,n){"use strict";n(0);var c=n(361),a=n(342),i=n(346),s=n(195),r=n(6);t.a=function(e){var t=e.setModal,n=e.toggleCallback,o=e.actionText,u=e.itemText,l=e.modalAction;return Object(r.jsx)("div",{children:Object(r.jsxs)(c.a,{isOpen:t,toggle:n,children:[Object(r.jsx)(a.a,{children:Object(r.jsxs)("p",{className:"span-text___light",children:[o," ",Object(r.jsx)("span",{className:"span-text___bold",children:u}),"?"]})}),Object(r.jsxs)(i.a,{children:[Object(r.jsx)(s.a,{color:"primary",onClick:l,children:"Confirm"})," ",Object(r.jsx)(s.a,{color:"secondary",onClick:n,children:"Cancel"})]})]})})}},136:function(e,t,n){"use strict";n(0);var c=n(10),a=n(6);t.a=function(){return Object(a.jsx)("div",{className:"form-group",style:{marginLeft:"1rem"},children:Object(a.jsx)("button",{type:"button",className:"btn btn-outline-primary",onClick:function(){return c.a.dispatch("logout")},children:"Logout"})})}},358:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(7),i=n(9),s=n(124),r=n(18),o=n(118),u=n(31),l=n(47),b=n(20),d=n(14),j=n(6),O=function(e){var t=e.menuItem,n=e.handleItemClick,c=t.link,a=t.name;return Object(j.jsx)(s.b,{style:{zIndex:10,backgroundColor:"#DEE2E6"},title:a,onClick:function(){return n(t)},children:a},"mi-".concat(a,"/").concat(c))},h=function(e){var t=e.parentId,n=e.listItems,s=Object(i.b)((function(e){return e.auth})).contentPath,r=Object(a.g)(),o=Object(i.a)(),u=Object(c.useCallback)((function(e){var n=new AbortController;return void 0!==t&&s&&(o(Object(b.f)({parentId:t,item:e})),o(Object(b.c)(e.link)).then((function(){r.push("".concat(s,"/video/").concat(e.link))})).catch((function(e){o(Object(d.c)(e)),r.push(s)}))),function(){return n.abort()}}),[s,r,o,t]),l=n&&n.map((function(e){return Object(j.jsx)(O,{menuItem:e,handleItemClick:u,children:e.name},e.link)}));return Object(j.jsx)(j.Fragment,{children:l})},f=function(e){var t=e.id,n=e.title,a=Object(c.useState)([]),o=Object(r.a)(a,2),u=o[0],b=o[1],d=Object(i.b)((function(e){return e.subMenu})).loading,O=Object(l.a)({id:t,subMenuObj:{},isLoading:!1,error:null}),f=Object(r.a)(O,2),m=f[0],p=f[1],x=m.subMenuObj,g=Object(c.useCallback)((function(){var e;(e=x.itemList)&&e&&b(x.itemList)}),[x]),v=Object(c.useCallback)((function(){m.isLoading||p()}),[p,m]);return Object(c.useEffect)((function(){"successful"!==d||m.isLoading||g()}),[d,g,m]),Object(j.jsx)(s.g,{style:{zIndex:5,backgroundColor:"#DEE2E6"},title:n,onClick:v,children:Object(j.jsx)(h,{parentId:t,listItems:u})},"sm".concat(t))},m=function(e){var t=e.subMenus,n=Object.keys(t).map((function(e){return Object(j.jsx)(f,{id:t[e],title:e},t[e])}));return Object(j.jsx)(j.Fragment,{children:n})},p=n(32),x=n(26),g=n(10),v=n(2),k=n.n(v),y=n(3),C=n(116),w=n(19),N=n(361),S=n(342),_=n(343),I=n(344),E=n(345),L=n(195),M=n(346),D=function(e){var t=e.setModal,n=e.toggleCallback,c=e.actionText,a=e.handleSubmit,i=e.onSubmit,s=e.register;return Object(j.jsx)("div",{children:Object(j.jsxs)(N.a,{isOpen:t,toggle:n,children:[Object(j.jsx)(S.a,{children:Object(j.jsxs)(_.a,{onSubmit:a(i),children:[Object(j.jsxs)("p",{className:"span-text___light",children:[c," "]}),Object(j.jsxs)(I.a,{children:[Object(j.jsx)(E.a,{for:"name",children:Object(j.jsx)("span",{className:"span-text",children:"Name: "})}),Object(j.jsx)("input",Object(w.a)({className:"form-control"},s("name")))]}),Object(j.jsx)(L.a,{color:"primary",type:"submit",children:"Confirm"})]})}),Object(j.jsx)(M.a,{children:Object(j.jsx)(L.a,{color:"secondary",onClick:n,children:"Cancel"})})]})})},T=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(i.a)(),u=Object(i.b)((function(e){return e})).classification,l=function(){var e=Object(y.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{values:t.name?t:{},errors:t.name?{}:{name:{type:"required",message:"New submenu name is required."}}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=Object(C.d)({resolver:l,mode:"onChange"}),d=b.register,O=b.handleSubmit,h=b.formState.errors,f=Object(c.useCallback)((function(){a(!n)}),[n]);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{style:{padding:"0",position:"relative",height:"2rem",width:"2rem",minHeight:0},id:"create-submenu-button",type:"button",className:"btn btn-outline-primary menu-button",onClick:f,children:Object(j.jsx)("big",{children:Object(j.jsx)(o.c,{})})}),Object(j.jsx)(D,{actionText:"Add Submenu",register:d,onSubmit:function(e){var t=e.name;h.name||s(Object(x.a)({classification:u.selected._id,name:t})),f()},handleSubmit:O,setModal:n,toggleCallback:f})]})},z=function(e){var t=e.classification,n=t._id,a=t.name,l=t.hasSubMenu,d=t.listItems,O=t.subMenus,f=Object(c.useState)("20rem"),v=Object(r.a)(f,2),k=v[0],y=v[1],C=Object(i.b)((function(e){return e.auth})).showEdit,w=Object(i.b)((function(e){var t;return null===(t=e.auth.user)||void 0===t?void 0:t.roles})),N=Object(i.a)(),S=Object(c.useRef)(null),_=function(e){return!!e&&!!e},I=Object(c.useCallback)((function(){S.current&&_(t)&&N(Object(p.g)(t)).then((function(){g.a.dispatch("updateItems")}))}),[t,N]),E=Object(c.useCallback)((function(){_(t)&&(N(Object(p.c)(!0)),N(Object(x.c)(!1)),N(Object(b.b)(!1)),N(Object(p.g)(t)).then((function(){g.a.dispatch("updateItems")})))}),[t,N]);return Object(c.useEffect)((function(){C&&y("17rem")}),[C]),Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{style:{display:"flex"},children:[w&&w.includes("ROLE_ADMIN")&&C&&Object(j.jsxs)("button",{style:{marginLeft:".5ch"},type:"button",className:"btn btn-outline-secondary menu-button",onClick:E,children:[Object(j.jsx)(u.b,{to:"/dashboard/admin/edit/".concat(n)}),Object(j.jsx)("small",{children:Object(j.jsx)(o.a,{})})]},"edit-button".concat(n)),Object(j.jsxs)(s.g,{ref:S,style:{width:k,fontWeight:"bold",zIndex:1,textTransform:"uppercase",paddingLeft:0},id:"sm-id".concat(n),title:a,onClick:I,children:[l&&0!==Object.keys(t.subMenus).length&&Object(j.jsxs)(j.Fragment,{children:[w&&w.includes("ROLE_ADMIN")&&C&&Object(j.jsx)(T,{}),Object(j.jsx)(m,{subMenus:O},"sm-list".concat(n))]}),d&&0!==t.listItems.length&&Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(h,{parentId:n,listItems:d},"item-list".concat(n))})]},"sm".concat(n))]},"classification-item/".concat(n))})},A=n(4),F=function(e){var t=e.classifications,n=e.isLoading,a=e.error,s=Object(i.b)((function(e){return e.subMenu.loading})),o=Object(i.b)((function(e){return e.classification})).entities,u=Object(i.a)(),l=Object(c.useState)(!1),b=Object(r.a)(l,2),j=b[0],O=b[1],h=Object(c.useState)({classifications:t,isLoading:n,error:a}),f=Object(r.a)(h,2),m=f[0],x=f[1];return[m,Object(c.useCallback)((function(){x((function(e){return Object(w.a)(Object(w.a)({},e),{},{isLoading:!0})}));var e=o;void 0!==e&&0!==e.length?x({classifications:e,isLoading:!1,error:null}):"pending"===s||void 0===o||0!==o.length||j||(O(!0),u(Object(p.d)()).then(A.d).then((function(e){if((t=e)&&t){void 0!==e&&x({classifications:e,isLoading:!1,error:null})}var t})).catch((function(e){u(Object(d.c)(e.message))})))}),[u,o,s,j])]},R=function(){var e=Object(i.b)((function(e){return e.auth})),t=e.user,n=e.loading,a=F({classifications:[],isLoading:!1,error:null}),s=Object(r.a)(a,2),o=s[0],u=s[1],l=o.isLoading,b=o.classifications;Object(c.useEffect)((function(){"successful"===n&&t.accessToken&&u()}),[u,n,t]);var d,O=!l&&void 0!==b&&(!!(d=b)&&!!d)&&b.map((function(e){return Object(j.jsx)(z,{classification:e},"cl-item-".concat(e._id))}));return Object(j.jsx)(j.Fragment,{children:O})},P=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(i.a)(),u=function(){var e=Object(y.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{values:t.name?t:{},errors:t.name?{}:{name:{type:"required",message:"New classification name is required."}}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=Object(C.d)({resolver:u,mode:"onChange"}),b=l.register,d=l.handleSubmit,O=l.formState.errors,h=Object(c.useCallback)((function(){a(!n)}),[n]);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{style:{padding:"0",position:"relative",height:"2rem",width:"2rem",minHeight:0},id:"create-submenu-button",type:"button",className:"btn btn-outline-primary menu-button",onClick:h,children:Object(j.jsx)("big",{children:Object(j.jsx)(o.c,{})})}),Object(j.jsx)(D,{actionText:"Create new Classification",register:b,onSubmit:function(e){var t=e.name;O.name||s(Object(p.a)({name:t})),h()},handleSubmit:d,setModal:n,toggleCallback:h})]})},q=function(){var e=Object(i.b)((function(e){return e.auth})).showEdit;return Object(j.jsx)("div",{className:"sidebar",children:Object(j.jsxs)(s.c,{children:[Object(j.jsx)("div",{className:"sidebar___header",children:Object(j.jsxs)(s.f,{style:{display:"flex"},children:[e&&Object(j.jsx)(P,{}),Object(j.jsx)("p",{className:"sidebar___header___text",children:"Classifications"})]})}),Object(j.jsx)("div",{className:"sidebar___content",children:Object(j.jsx)(s.d,{children:Object(j.jsx)(s.a,{iconShape:"square",children:Object(j.jsx)(R,{})})})}),Object(j.jsx)("div",{className:"sidebar___footer",children:Object(j.jsx)(s.e,{children:Object(j.jsxs)("small",{children:["v0.6 ",(new Date).getFullYear()]})})})]})})},U=n(48),H=n.n(U),J=Object(c.lazy)((function(){return n.e(12).then(n.bind(null,357))})),V=Object(c.lazy)((function(){return n.e(17).then(n.bind(null,351))})),Y=Object(c.lazy)((function(){return Promise.all([n.e(6),n.e(15)]).then(n.bind(null,360))})),W=Object(c.lazy)((function(){return n.e(16).then(n.bind(null,354))})),B=Object(c.lazy)((function(){return n.e(9).then(n.bind(null,355))})),G=Object(c.lazy)((function(){return n.e(14).then(n.bind(null,356))})),K=function(e){var t=e.routePath,n=Object(i.b)((function(e){return e.auth.user})).roles,s=null!==n&&n.includes("ROLE_ADMIN");return Object(j.jsx)(c.Suspense,{fallback:Object(j.jsx)("div",{className:"spinner",children:Object(j.jsx)(H.a,{})}),children:Object(j.jsxs)(a.d,{children:[Object(j.jsx)(a.b,{path:"".concat(t,"/home"),exact:!0,component:B}),Object(j.jsx)(a.b,{path:"".concat(t,"/classification/:id"),component:W}),Object(j.jsx)(G,{isAuthenticated:s,path:"".concat(t,"/edit/:id"),authenticationPath:"".concat(t),component:J}),Object(j.jsx)(a.b,{path:"/dashboard/admin/move/:id",component:V}),Object(j.jsx)(a.b,{path:"".concat(t,"/video/:id"),component:Y}),Object(j.jsx)(a.a,{from:"".concat(t),to:"".concat(t,"/home"),exact:!0})]})})},Q=function(){var e,t,n=Object(i.b)((function(e){return e.auth})),s=n.isAuth,u=n.user,l=n.contentPath,b=Object(c.useState)("/dashboard"),d=Object(r.a)(b,2),O=d[0],h=d[1],f=Object(a.h)(),m=Object(a.g)(),p=!!(t=u)&&!!t&&(null===(e=u.roles)||void 0===e?void 0:e.includes("ROLE_ADMIN"));return Object(c.useEffect)((function(){p&&h("/dashboard/admin")}),[p]),s&&l?Object(j.jsxs)("div",{className:"content",children:[f.pathname!=="".concat(l,"/home")&&Object(j.jsx)(L.a,{style:{position:"absolute",zIndex:1e3},onClick:function(){return m.push(l)},children:Object(j.jsx)("big",{children:Object(j.jsx)(o.e,{})})}),Object(j.jsx)(K,{routePath:O})]}):null},X=function(){return Object(j.jsx)("footer",{children:Object(j.jsxs)("small",{children:["\xa9 Copyright ",(new Date).getFullYear(),", Division of Emergency Ultrasound"]})})},Z=n(196),$=n.n(Z),ee=n(136),te=function(e){var t=e.email;return Object(j.jsx)("div",{style:{fontSize:"1.35ch",color:"#6C757D"},className:"form-group",children:t})},ne=n(117),ce=n(8),ae=n(27),ie=n(125),se=n(198),re=n(362),oe=n(347),ue=n(349),le=function(e){var t=e.dropDownOpen,n=e.dropDownToggle,c=e.databaseInitToggle,a=e.databaseUpdateToggle;return Object(j.jsxs)(se.a,{isOpen:t,toggle:n,children:[Object(j.jsx)(re.a,{caret:!0,children:"Dropdown"}),Object(j.jsxs)(oe.a,{container:"body",children:[Object(j.jsx)(ue.a,{onClick:c,children:Object(j.jsx)("span",{className:"span-text",children:"Reset Database"})}),Object(j.jsx)(ue.a,{onClick:a,children:Object(j.jsx)("span",{className:"span-text",children:"Update Database"})})]})]})},be=function(){var e,t,n=Object(i.b)((function(e){return e})).auth,a=n.user,s=n.showEdit,o=Object(c.useState)(null),u=Object(r.a)(o,2),l=u[0],b=u[1],O=Object(c.useState)(!1),h=Object(r.a)(O,2),f=h[0],m=h[1],p=Object(c.useState)(!1),x=Object(r.a)(p,2),g=x[0],v=x[1],C=Object(c.useState)(!1),w=Object(r.a)(C,2),N=w[0],S=w[1],_=Object(c.useState)(!1),I=Object(r.a)(_,2),E=I[0],L=I[1],M=null===(e=a.roles)||void 0===e?void 0:e.includes("ROLE_ADMIN"),D=Object(i.a)(),T=Object(c.useCallback)((function(){m(!f)}),[f]),z=Object(c.useCallback)((function(){v(!g)}),[g]);return Object(c.useEffect)((function(){(function(){var e=Object(y.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.a.get("date");case 2:t=e.sent,b(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.useEffect)((function(){E!==s&&L(s)}),[E,s]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("header",{style:{zIndex:10},children:Object(j.jsxs)("div",{className:"button-wrapper",children:[Object(j.jsx)("div",{className:"date",children:l}),M&&s&&Object(j.jsx)("div",{className:"form-group",style:{marginLeft:"1rem"},children:Object(j.jsx)(le,{dropDownOpen:N,dropDownToggle:function(){return S(!N)},databaseInitToggle:T,databaseUpdateToggle:z})}),Object(j.jsx)(ee.a,{}),a.email&&(t=ae.f,!!t&&!!t)&&Object(j.jsx)(te,{email:a.email}),M&&Object(j.jsx)("div",{style:{position:"absolute",left:"1rem"},children:Object(j.jsx)("label",{children:Object(j.jsx)($.a,{height:14,width:28,handleDiameter:12,onChange:function(){D(Object(ae.e)()),L(!E)},checked:E})})})]})}),Object(j.jsx)(ie.a,{actionText:"Reset the ",itemText:"database",setModal:f,toggleCallback:T,modalAction:function(){D(Object(ne.e)()).catch((function(e){D(Object(d.c)(e.data.message))})),T()}}),Object(j.jsx)(ie.a,{actionText:"Update the ",itemText:"database",setModal:g,toggleCallback:z,modalAction:function(){D(Object(ne.f)()),z()}})]})},de=function(){return Object(j.jsxs)("div",{className:"body",children:[Object(j.jsx)(be,{}),Object(j.jsx)(Q,{}),Object(j.jsx)(X,{})]})};t.default=Object(a.i)((function(){var e=Object(i.b)((function(e){return e.auth})).isAuth;return Object(c.useEffect)((function(){e||g.a.dispatch("logout")}),[e]),Object(j.jsxs)("div",{style:{boxSizing:"border-box",minHeight:"100vh"},children:[Object(j.jsx)(q,{}),Object(j.jsx)(de,{})]})}))}}]);
//# sourceMappingURL=8.45b37f1c.chunk.js.map